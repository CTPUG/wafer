{% extends 'wafer/base.html' %}
{% load i18n %}

{% block content %}
<h1>{{ profile.display_name }}</h1>

{% if not profile.contact_number %}
<div class="alert alert-warning">
    {% trans "You haven't added your contact number" %}.
</div>
{% endif %}

<h2>Preferred categories</h2>
{% if object.preferred_categories.all %}
<ul>
    {% for category in object.preferred_categories.all %}
    <li>{{ category }}</li>
    {% endfor %}
</ul>
{% else %}
<p>{% trans "No preferred categories" %}.</p>
{% endif %}

<a href="{% url 'wafer_volunteer_update' object.user.username %}" class="btn btn-secondary">
    {% trans "Update preferred categories" %}
</a>

<h2>Tasks</h2>
{% if object.tasks.all %}
<table>
    <thead>
        <tr>
            <th>{% trans 'When' %}</th>
            <th>{% trans 'Title' %}</th>
            <th>{% trans 'Volunteers' %}</th>
            <th>{% trans 'Category' %}</th>
            <th>{% trans 'Talk' %}</th>
        </tr>

        {% for task in object.tasks.all %}
        <tr>
            <td>{{ task.datetime }}</td>
            <td>
                <a href="{% url 'wafer_task' task.pk %}">{{ task.name }}</a>
            </td>
            <td>{{ task.nbr_volunteers }}/{{ task.nbr_volunteers_max }}</td>
            <td>
                {% if item.category %}
                {{ item.category }}
                {% else %}
                N/A
                {% endif %}
            </td>
            <td>
                {% if item.talk %}
                <a href="{% url 'wafer_talk' item.talk.pk %}">{{ item.talk.title }}</a>
                {% else %}
                N/A
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </thead>
</table>
{% else %}
<p>{% trans "No tasks" %}.</p>
{% endif %}
{% endblock %}
